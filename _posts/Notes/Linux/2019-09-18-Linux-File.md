---
layout: post
title: Linux文件目录管理
data: 2019-09-18
categories: Notes
tags: 
 - Linux
description:
excerpt_separator: ""
---

# Linux文件系统的架构

## Linux根目录下的主要内容

以下是Linux系统主要目录及其内容：

| 目录   | 内容                                       |
| ------ | ------------------------------------------ |
| /bin   | 存放系统常用的二进制可执行文件，即常用命令 |
| /boot  | 内核与启动文件                             |
| /dev   | 各种设备文件                               |
| /etc   | 系统软件的启动和配置文件                   |
| /home  | 用户的主目录                               |
| /lib   | C编辑器的库                                |
| /media | 可移动介质的安装点                         |
| /opt   | 额外安装的应用软件包存放位置               |
| /proc  | 进程的映像                                 |
| /root  | 超级用户root的主目录                       |
| /sbin  | 和系统操作有关的命令                       |
| /tmp   | 共用的临时文件存放点                       |
| /usr   | 非系统必需的应用程序                       |
| /var   | 系统专用的数据和配置文件                   |

## Linux /usr目录下的主要内容

以下是/usr目录下的主要内容：

| 目录         | 内容                             |
| ------------ | -------------------------------- |
| /usr/bin     | 绝大部分的用户命令               |
| /usr/include | C/C++等程序语言的头文件          |
| /usr/local   | 本地系统管理员自行安装的应用程序 |
| /usr/sbin    | 非系统正常运行所需要的系统指令   |
| /usr/share   | 共享文件                         |
| /usr/src     | 应用程序的源码                   |

# 建立文件和目录

## 建立目录

使用mkdir命令一次建立一个或几个目录。如下命令在当前目录下建立foo和bar两个目录。

```bash
$ mkdir foo bar
```

也可以使用绝对路径来建立目录。

```bash
$ mkdir /foo/bar
```

使用该命令时若目录/foo不存在将会报错，使用参数-p可以完整地创建一个子目录。

```bash
$ mkdir -p /foo/bar
```

## 建立空文件

使用touch命令来建立空文件。如下命令在当前目录下建立一个名为foo的文件。

```bash
$ touch foo
```

使用该命令建立的文件不包含任何内容。也可以使用touch命令来更新一个文件的建立日期和时间，而不会修改文件内容。

# 移动、复制和删除

## 移动和重命名

使用mv命令来移动文件。如下命令可将hello文件移动到test目录下。

```bash
$ mv hello test/
```

该命令将会默认覆盖掉目标目录下的同名文件，使用参数-i可发现这样的情况。

也可以使用-b参数，目标目录下的同名文件的文件名后将会被加上“~”。

```bash
$ mv -b hello test/
$ ls
hello	hello~
```

mv命令也可用于重命名文件。如下命令可将hello文件重命名为hello_bak。

```bash
$ mv hello hello_bak
```

## 复制文件和目录

使用cp命令来复制文件。如下命令可将hello文件复制到test目录中。

```bash
$ cp hello test/
```

cp命令的-i和-b参数与mv命令类似。产品命令在执行复制任务是默认跳过目录，使用-r参数完成对目录及其下文件的复制。

## 删除文件和目录

使用rm命令可一次删除一个或几个文件。如下命令将会删除当前目录下的所以php文件。

```bash
$ rm *.php
```

该目录直接删除文件，而不是放入类似“回收站”的临时目录，使用-i参数在删除每一个文件前询问。

使用-r参数将会递归地删除目录下所有的文件和子目录。

也可以使用rmdir命令来删除一个空的目录。

# 文件和目录的权限

## 查看文件和目录的属性

使用ls命令和-l参数以查看文件属性，包括权限。

```bash
$ ls -l
-rw-r--r-- 1 glyuan glyuan 0 2019-9-18 19:42 Hello
```

我们关注第一个字段的第二个到第十个字符，在上例中是“rw-r--r--”，应该这样断句：rw-、r--、r--，分别表示所有者、组成员和其他用户说拥有的权限，rwx依次表示读取、写入、执行权限，若某个权限被禁用，使用“-”代替。

第三和第四个字段分别表示文件的属主和属组，上例中为glyuan用户和glyuan组。

## 改变文件所有权

使用chown命令来改变文件所有权。以下命令将改变hello文件的属主和属组分别为glyuan用户和root属组。

```bash
$ chown glyuan:root hello
```

使用-R参数可同时修改一个目录下所以文件和子目录的所有权。

也可以使用chgrp命令修改文件的属组。

```bash
$ chgrp root hello
```

## 改变文件权限

使用chmod命令修改文件权限，该命令使用“用户组+/-权限”的方式修改权限。u、g、o、a分别表示文件属主、文件属组、其他人和所有人。如下命令增加了属主对hello文件的执行权限。

```bash
$ chmod u+x hello
```

同理，如下命令将删除所有人对hello文件的执行权限。

```bash
$ chmod a-x hello
```

也可以使用“用户组=权限”的方式修改权限。如下命令为属主和属组设定了读写权限，而仅赋予其他用户读取权限。

```bash
$ chmod ug=rw,o=r hello
```

还可以使用“用户组1=用户组2“的方式为用户组1赋予与用户组2相同的权限。

chmod命令还支持八进制的文件权限表示方法，如下命令将hello文件的所有权限赋予属主，而只赋予属组和其他人执行权限。

```bash
$ chmod 711 hello
```

一下为八进制、二进制、文件权限的对应关系：

| 八进制 | 二进制 | 权限 |
| ------ | ------ | ---- |
| 0      | 000    | ---  |
| 1      | 001    | --x  |
| 2      | 010    | -w-  |
| 3      | 011    | -wx  |
| 4      | 100    | r--  |
| 5      | 101    | r-x  |
| 6      | 110    | rw-  |
| 7      | 111    | rwx  |

## 查看文件类型

使用ls命令和-l参数以查看文件属性。

```bash
$ ls -l
-rw-r--r-- 1 glyuan glyuan 0 2019-9-18 19:42 Hello
```

第一个字段的第一个字符表示文件类型。以下为Linux中的文件类型：

| 文件类型     | 符号 |
| ------------ | ---- |
| 普通文件     | -    |
| 目录         | d    |
| 字符设备文件 | c    |
| 块设备文件   | d    |
| 本地域套接口 | s    |
| 有名管道     | p    |
| 符号链接     | l    |

符号链接类似Windows中的快捷方式，使用ln命令和-s参数创建符号链接。如下命令将为target文件创建一个名为link的链接。

```bash
$ ln -s target link
```

# 输入输出重定向和管道

## 输出重定向

程序默认输出于标准输出，标准输出默认指向显示器。可以使用“>”符号将输出重定向到指定位置。如下命令会将ls命令的返回内容重定向到out文件。

```bash
$ ls > out
```

若out文件不存在，该命令将先创建out文件，若存在，该命令将删除原有内容重新写入。可使用“>>”符号追加写入。

## 输入重定向

与标准输出类似，默认的标注输入指向键盘。可以使用“<”符号将输入重定向到指定位置。如下命令中，程序会从in文件中读取内容作为标准输入。

```bash
$ cat < in
```

## 管道

使用"\|"符号将一条命令的输出作为另一条命令输入。以下命令会在当前目录中查找包含字符foo的文件。

```bash
$ ls | grep foo
```





